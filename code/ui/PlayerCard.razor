@using System;
@using Sandbox;
@using Sandbox.UI;
@using Sandbox.UI.Construct;
@using Facepunch.BombRoyale;

@namespace Facepunch.BombRoyale.UI
@attribute [StyleSheet( "/ui/PlayerCard.scss" )]
@inherits Panel

@if ( !Player.IsValid() ) return;

<div class="container @GetRootClass()">
    <label class="name">@Player.Client.Name</label>
    <label class="index">P@(Player.Client.NetworkIdent)</label>

    <div class="avatar">
        <div class="inner"></div>
        <div class="head"></div>

        @if ( Player.LifeState == LifeState.Dead )
        {
            <div class="dead"></div>
        }
    </div>

    <div class="lives">
        @for ( var i = 0; i < Player.LivesLeft; i++ )
        {
            @:<div class="life"><div>
        }
    </div>
</div>

@code
{
    public BombRoyalePlayer Player { get; set; }

    protected override int BuildHash()
    {
        if ( !Player.IsValid() ) return 0;
        return HashCode.Combine( Player, Player.LifeState );
    }

    private string GetRootClass()
    {
        if ( Player.IsValid() )
            return $"p{Player.Client.NetworkIdent}";
        else
            return string.Empty;
    }
}
